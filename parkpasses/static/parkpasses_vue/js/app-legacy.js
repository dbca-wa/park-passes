(function(){var e={6700:function(e,t,a){var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=6700},7056:function(e,t,a){var n=a(9755);e.exports={name:"DataTable",props:{dtHeaders:{type:Array,required:!0},dtOptions:{type:Object,required:!0},id:{required:!0}},data:function(){return{table:null,vmDataTable:null}},computed:{},methods:{initEvents:function(){let e=this;var t=Object.assign(e.dtOptions);e.vmDataTable=n(e.table).DataTable(t),n(e.table).resize((function(t){e.vmDataTable.draw(!0)}))}},mounted:function(){let e=this;e.table=n("#"+e.id),n.fn.dataTable.ext.errMode="throw",e.initEvents()}}},5965:function(e){e.exports={proposals_paginated_list:"/api/proposal_paginated",discard_proposal:function(e){return`/api/proposal/${e}.json`},application_types_dict:"/api/application_types_dict",application_statuses_dict:"/api/application_statuses_dict"}},8249:function(e,t,a){"use strict";var n=a(9963),o=a(2119),i=a(6252);const s={class:"container",id:"externalDash"};function r(e,t,a,n,o,r){const l=(0,i.up)("ApplicationsTable"),c=(0,i.up)("FormSection");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(c,{formCollapse:!1,label:"Applications",subtitle:"- View existing applications and lodge new ones",Index:"applications"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{level:"external"})])),_:1})])}var l=a(3577);const c=["id"],d={class:"card-header fw-bold h4",style:{padding:"30px"}},p={class:"row"},u={class:"col-6"},_={class:"col-6 text-end"},f=["data-bs-target"],m=["id"];function b(e,t,a,n,o,s){return(0,i.wg)(),(0,i.iD)("div",{class:"card section-wrapper",id:e.custom_id},[(0,i._)("div",d,[(0,i._)("div",p,[(0,i._)("div",u,(0,l.zw)(a.label),1),(0,i._)("div",_,[(0,i._)("i",{class:"bi fw-bold down-chevron-close chevron-toggle","data-bs-target":"#"+s.section_body_id},null,8,f)])])]),(0,i._)("div",{class:"card-body",id:s.section_body_id},[(0,i.WI)(e.$slots,"default",{},void 0,!0)],8,m)],8,c)}var h=a(5934),g={name:"FormSection",props:{label:{},subtitle:{type:String,default:""},Index:{},hideHeader:{}},data:function(){return{custom_id:(0,h.Z)()}},computed:{section_header_id:function(){return"section_header_"+this.Index},section_body_id:function(){return"section_body_"+this.Index}},methods:{},mounted:function(){},created:function(){}},v=a(3744);const j=(0,v.Z)(g,[["render",b],["__scopeId","data-v-7a0358b4"]]);var y=j;const w={class:"row"},x={class:"col-md-3"},T={class:"form-group"},k=(0,i._)("label",{for:""},"Type",-1),A=(0,i._)("option",{value:"all"},"All",-1),S=["value"],D={class:"col-md-3"},C={class:"form-group"},O=(0,i._)("label",{for:""},"Status",-1),$=(0,i._)("option",{value:"all"},"All",-1),L=["value"],P={class:"col-md-3"},F={class:"form-group"},z=(0,i._)("label",{for:""},"Lodged From",-1),I={class:"input-group date",ref:"proposalDateFromPicker"},Y={class:"col-md-3"},M={class:"form-group"},q=(0,i._)("label",{for:""},"Lodged To",-1),E={class:"input-group date",ref:"proposalDateToPicker"},Z={class:"row"},H={class:"col-lg-12"};function W(e,t,a,o,s,r){const c=(0,i.up)("CollapsibleFilters"),d=(0,i.up)("datatable");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(c,{component_title:"Filters",ref:"collapsible_filters",onCreated:r.collapsible_component_mounted,class:"mb-2"},{default:(0,i.w5)((()=>[(0,i._)("div",w,[(0,i._)("div",x,[(0,i._)("div",T,[k,(0,i.wy)((0,i._)("select",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.filterApplicationType=e)},[A,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.application_types,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e.code},(0,l.zw)(e.description),9,S)))),256))],512),[[n.bM,s.filterApplicationType]])])]),(0,i._)("div",D,[(0,i._)("div",C,[O,(0,i.wy)((0,i._)("select",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>s.filterApplicationStatus=e)},[$,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.application_statuses,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e.code},(0,l.zw)(e.description),9,L)))),256))],512),[[n.bM,s.filterApplicationStatus]])])]),(0,i._)("div",P,[(0,i._)("div",F,[z,(0,i._)("div",I,[(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",placeholder:"DD/MM/YYYY","onUpdate:modelValue":t[2]||(t[2]=e=>s.filterProposalLodgedFrom=e)},null,512),[[n.nr,s.filterProposalLodgedFrom]])],512)])]),(0,i._)("div",Y,[(0,i._)("div",M,[q,(0,i._)("div",E,[(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",placeholder:"DD/MM/YYYY","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterProposalLodgedTo=e)},null,512),[[n.nr,s.filterProposalLodgedTo]])],512)])])])])),_:1},8,["onCreated"]),(0,i._)("div",Z,[(0,i._)("div",H,[(0,i.Wm)(d,{ref:"application_datatable",id:s.datatable_id,dtOptions:r.dtOptions,dtHeaders:r.dtHeaders},null,8,["id","dtOptions","dtHeaders"])])])])}const N={id:"DataTable"},V=["id"],R=["data-class"],U=(0,i._)("tbody",null,null,-1);function B(e,t,a,n,o,s){return(0,i.wg)(),(0,i.iD)("div",N,[(0,i._)("table",{class:"hover table border table-striped table-bordered dt-responsive nowrap",cellspacing:"0",width:"100%",id:e.id},[(0,i._)("thead",null,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.dtHeaders,((e,t)=>((0,i.wg)(),(0,i.iD)("th",{"data-class":0==t?"expand":null},(0,l.zw)(e),9,R)))),256))])]),U],8,V)])}var J=a(7056),K=a.n(J);const X=(0,v.Z)(K(),[["render",B]]);var G=X,Q=a(5965),ee=a.n(Q),te=a(4325),ae=a.n(te);a(7559);const ne={class:"toggle_filters_wrapper"},oe=["data-bs-target","id"],ie={class:"me-auto"},se={class:""},re=["id","title"],le={class:"ml-2"},ce=["id"],de=["id"];function pe(e,t,a,n,o,s){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",ne,[(0,i._)("div",{"data-bs-toggle":"collapse","data-bs-target":"#"+e.target_elem_id,id:e.button_elem_id,class:"toggle_filters_button collapsed d-flex align-items-center",onClick:t[0]||(t[0]=(...e)=>s.toggle_filters_button_clicked&&s.toggle_filters_button_clicked(...e))},[(0,i._)("div",ie,(0,l.zw)(a.component_title),1),(0,i._)("div",se,[(0,i._)("i",{id:e.warning_icon_id,title:e.warning_icon_title,class:"fa-solid fa-exclamation-circle fa-2x filter_warning_icon"},null,8,re)]),(0,i._)("div",le,[(0,i._)("i",{id:e.chevron_elem_id,class:"rotate_icon fa-solid fa-chevron-down"},null,8,ce)])],8,oe),(0,i._)("div",{class:"collapse",id:e.target_elem_id},[(0,i.WI)(e.$slots,"default")],8,de)])])}var ue=a(9755),_e={name:"CollapsibleComponent",props:{component_title:{type:String,required:!1,default:""}},watch:{filters_expanded:function(){let e=ue("#"+this.chevron_elem_id);this.filters_expanded?e.addClass("chev_rotated"):e.removeClass("chev_rotated")}},data:function(){return{target_elem_id:"target_elem_"+(0,h.Z)(),button_elem_id:"button_elem_"+(0,h.Z)(),chevron_elem_id:"chevron_elem_"+(0,h.Z)(),warning_icon_id:"warning_elem_"+(0,h.Z)(),warning_icon_title:"",display_icon:!1,filters_expanded:null}},methods:{toggle_filters_button_clicked:function(e){let t=ue("#"+this.button_elem_id).hasClass("collapsed");this.filters_expanded=!t},show_warning_icon:function(e){let t=ue("#"+this.warning_icon_id);e?(t.css("opacity",1),this.warning_icon_title="filter(s) applied"):(t.css("opacity",0),this.warning_icon_title="")}},mounted:function(){this.$nextTick((function(){this.$emit("created")}))}};const fe=(0,v.Z)(_e,[["render",pe]]);var me=fe,be=a(381),he=a(9755),ge=a(6455),ve={name:"TableApplications",props:{level:{type:String,required:!0,validator:function(e){let t=["internal","referral","external"];return-1!=t.indexOf(e)}},email_user_id_assigned:{type:Number,required:!1,default:0},filterApplicationType_cache_name:{type:String,required:!1,default:"filterApplicationType"},filterApplicationStatus_cache_name:{type:String,required:!1,default:"filterApplicationStatus"},filterApplicationLodgedFrom_cache_name:{type:String,required:!1,default:"filterApplicationLodgedFrom"},filterApplicationLodgedTo_cache_name:{type:String,required:!1,default:"filterApplicationLodgedTo"}},data(){let e=this;return{datatable_id:"applications-datatable-"+(0,h.Z)(),filterApplicationType:sessionStorage.getItem(e.filterApplicationType_cache_name)?sessionStorage.getItem(e.filterApplicationType_cache_name):"all",filterApplicationStatus:sessionStorage.getItem(e.filterApplicationStatus_cache_name)?sessionStorage.getItem(e.filterApplicationStatus_cache_name):"all",filterProposalLodgedFrom:sessionStorage.getItem(e.filterProposalLodgedFrom_cache_name)?sessionStorage.getItem(e.filterProposalLodgedFrom_cache_name):"",filterProposalLodgedTo:sessionStorage.getItem(e.filterProposalLodgedTo_cache_name)?sessionStorage.getItem(e.filterProposalLodgedTo_cache_name):"",application_types:[],application_statuses:[],dateFormat:"DD/MM/YYYY",datepickerOptions:{format:"DD/MM/YYYY",showClear:!0,useCurrent:!1,keepInvalid:!0,allowInputToggle:!0},td_expand_class_name:"expand-icon",td_collapse_class_name:"collapse-icon",expandable_row_class_name:"expandable_row_class_name"}},components:{datatable:G,CollapsibleFilters:me},watch:{filterApplicationStatus:function(){this.$refs.application_datatable.vmDataTable.draw(),sessionStorage.setItem(this.filterApplicationStatus_cache_name,this.filterApplicationStatus)},filterApplicationType:function(){this.$refs.application_datatable.vmDataTable.draw(),sessionStorage.setItem(this.filterApplicationType_cache_name,this.filterApplicationType)},filterProposalLodgedFrom:function(){this.$refs.application_datatable.vmDataTable.draw(),sessionStorage.setItem(this.filterProposalLodgedFrom_cache_name,this.filterProposalLodgedFrom)},filterProposalLodgedTo:function(){this.$refs.application_datatable.vmDataTable.draw(),sessionStorage.setItem(this.filterProposalLodgedTo_cache_name,this.filterProposalLodgedTo)},filterApplied:function(){this.$refs.collapsible_filters&&this.$refs.collapsible_filters.show_warning_icon(this.filterApplied)}},computed:{number_of_columns:function(){let e=this.$refs.application_datatable.vmDataTable.columns(":visible").nodes().length;return e},filterApplied:function(){let e=!0;return"all"===this.filterApplicationStatus.toLowerCase()&&"all"===this.filterApplicationType.toLowerCase()&&""===this.filterProposalLodgedFrom.toLowerCase()&&""===this.filterProposalLodgedTo.toLowerCase()&&(e=!1),e},debug:function(){return!!this.$route.query.debug&&"true"===this.$route.query.debug},is_external:function(){return"external"==this.level},is_internal:function(){return"internal"==this.level},dtHeaders:function(){return this.is_external?["id","Number","Type","Submitter","Applicant","Status","Lodged On","Action"]:this.is_internal?["id","Number","Type","Submitter","Applicant","Status","Lodged On","Assigned Officer","Action"]:void 0},column_id:function(){let e=this;return{data:"id",orderable:!1,searchable:!1,visible:!1,render:function(t,a,n){return e.debug&&console.log(n),n.id}}},column_lodgement_number:function(){return{data:"id",orderable:!0,searchable:!0,visible:!0,render:function(e,t,a){return a.migrated?a.lodgement_number+" (M)":a.lodgement_number},name:"lodgement_number"}},column_type:function(){return{data:"id",orderable:!0,searchable:!1,visible:!0,render:function(e,t,a){return a.application_type.name_display},name:"application_type"}},column_submitter:function(){return{data:"id",orderable:!1,searchable:!1,visible:!0,render:function(e,t,a){return a.submitter?a.submitter.fullname:""}}},column_applicant:function(){return{data:"id",orderable:!0,searchable:!1,visible:!0,render:function(e,t,a){return a.applicant_name}}},column_status:function(){let e=this;return{data:"id",orderable:!0,searchable:!1,visible:!0,render:function(t,a,n){return e.is_internal?n.processing_status:n.customer_status}}},column_lodged_on:function(){return{data:"id",orderable:!0,searchable:!1,visible:!0,render:function(e,t,a){return a.lodgement_date?be(a.lodgement_date).format("DD/MM/YYYY"):""},name:"lodgement_date"}},column_assigned_officer:function(){return{data:"id",orderable:!1,searchable:!1,visible:!0,render:function(e,t,a){return a.assigned_officer?a.assigned_officer.fullname:""},name:"assigned_officer__first_name, assigned_officer__last_name, assigned_approver__first_name, assigned_approver__last_name"}},column_action:function(){let e=this;return{data:"id",orderable:!1,searchable:!1,visible:!0,render:function(t,a,n){let o="";return e.is_internal&&(n.accessing_user_can_process?o+=`<a href='/internal/proposal/${n.id}'>Process</a><br/>`:o+=`<a href='/internal/proposal/${n.id}'>View</a><br/>`),e.is_external&&(n.can_user_edit?(o+=`<a href='/external/proposal/${n.id}'>Continue</a><br/>`,o+=`<a href='#${n.id}' data-discard-proposal='${n.id}'>Discard</a><br/>`):n.can_user_view&&(o+=`<a href='/external/proposal/${n.id}'>View</a><br/>`)),o}}},dtOptions:function(){let e=this,t=[],a=null,n=[{extend:"excel",text:'<i class="fa-solid fa-download"></i> Excel',className:"btn btn-primary ml-2",exportOptions:{columns:":visible"}},{extend:"csv",text:'<i class="fa-solid fa-download"></i> CSV',className:"btn btn-primary",exportOptions:{columns:":visible"}}];return e.is_external&&(t=[e.column_id,e.column_lodgement_number,e.column_type,e.column_submitter,e.column_applicant,e.column_status,e.column_lodged_on,e.column_action],a=!1),e.is_internal&&(t=[e.column_id,e.column_lodgement_number,e.column_type,e.column_submitter,e.column_applicant,e.column_status,e.column_lodged_on,e.column_assigned_officer,e.column_action],a=!0),{autoWidth:!1,language:{processing:"<i class='fa fa-4x fa-spinner fa-spin'></i>"},rowCallback:function(t,a){let n=he(t);n.attr("id","proposal_id_"+a.id),n.children().first().addClass(e.td_expand_class_name)},responsive:!0,serverSide:!0,searching:!0,ajax:{url:ee().proposals_paginated_list+"?format=datatables&email_user_id_assigned="+e.email_user_id_assigned,dataSrc:"data",data:function(t){t.filter_application_type=e.filterApplicationType,t.filter_application_status=e.filterApplicationStatus,t.filter_lodged_from=e.filterProposalLodgedFrom,t.filter_lodged_to=e.filterProposalLodgedTo,t.level=e.level}},dom:"<'d-flex align-items-center'<'me-auto'l>fB><'row'<'col-sm-12'tr>><'d-flex align-items-center'<'me-auto'i>p>",buttons:n,order:[[1,"desc"]],columns:t,processing:!0,initComplete:function(){}}}},methods:{adjust_table_width:function(){this.$refs.application_datatable.vmDataTable.columns.adjust(),this.$refs.application_datatable.vmDataTable.responsive.recalc()},collapsible_component_mounted:function(){this.$refs.collapsible_filters.show_warning_icon(this.filterApplied)},new_application_button_clicked:async function(){console.log(this.$router),await this.$router.push({name:"apply_proposal"}),console.log(" new application")},discardProposal:function(e){let t=this;ge({title:"Discard Application",text:"Are you sure you want to discard this application?",type:"warning",showCancelButton:!0,confirmButtonText:"Discard Application",confirmButtonColor:"#dc3545"}).then((()=>{fetch(ee().discard_proposal(e),{method:"DELETE"}).then((e=>{ge("Discarded","Your application has been discarded","success"),t.$refs.application_datatable.vmDataTable.draw()}),(e=>{}))}),(e=>{}))},fetchFilterLists:function(){let e=this;fetch(ee().application_types_dict+"?apply_page=False").then((t=>{e.application_types=t.body}),(e=>{})),fetch(ee().application_statuses_dict).then((t=>{e.is_internal?e.application_statuses=t.body.internal_statuses:e.application_statuses=t.body.external_statuses}),(e=>{}))},addEventListeners:function(){let e=this;e.$refs.application_datatable.vmDataTable.on("click","a[data-discard-proposal]",(function(t){t.preventDefault();let a=he(this).attr("data-discard-proposal");e.discardProposal(a)})),e.$refs.application_datatable.vmDataTable.on("click","td",(function(t){let a=he(this);if(!a.hasClass(e.td_expand_class_name)&&!a.hasClass(e.td_collapse_class_name))return;let n=a.closest("tr"),o=n.attr("id"),i=(o.replace("proposal_id_",""),n.children().first());if(i.hasClass(e.td_expand_class_name)){let t="<div><strong>Site:</strong> (site name here)</div><div><strong>Group:</strong> (group name here)</div>",a=he('<tr class="'+e.expandable_row_class_name+'"><td colspan="'+e.number_of_columns+'">'+t+"</td></tr>");a.hide(),a.insertAfter(n),a.fadeIn(1e3),i.removeClass(e.td_expand_class_name).addClass(e.td_collapse_class_name)}else{let t=n.next();t.is("tr")&t.hasClass(e.expandable_row_class_name)&&t.fadeOut(500,(function(){t.remove()})),i.removeClass(e.td_collapse_class_name).addClass(e.td_expand_class_name)}}))}},created:function(){this.fetchFilterLists()},mounted:function(){let e=this;this.$nextTick((()=>{e.addEventListeners()}))}};const je=(0,v.Z)(ve,[["render",W]]);var ye=je,we={name:"ExternalDashboard",data(){return{}},components:{FormSection:y,ApplicationsTable:ye},watch:{},computed:{is_debug:function(){return!(!this.$route.query.hasOwnProperty("debug")||"true"!=this.$route.query.debug)},is_external:function(){return"external"==this.level},is_internal:function(){return"internal"==this.level}},methods:{},mounted:function(){chevron_toggle.init()},created:function(){}};const xe=(0,v.Z)(we,[["render",r]]);var Te=xe,ke={path:"/external",component:o.MA,name:"external-dashboard",children:[{path:"/external",component:Te,name:"external-dashboard"}]};const Ae={class:"container",id:"externalDash"},Se={key:0},De={class:"nav nav-pills",id:"pills-tab",role:"tablist"},Ce={class:"nav-item"},Oe={class:"tab-content",id:"pills-tabContent"},$e={class:"tab-pane active",id:"pills-applications",role:"tabpanel","aria-labelledby":"pills-applications-tab"};function Le(e,t,a,n,o,s){const r=(0,i.up)("ApplicationsTable"),l=(0,i.up)("FormSection");return(0,i.wg)(),(0,i.iD)("div",Ae,[s.is_debug?((0,i.wg)(),(0,i.iD)("div",Se,"src/components/internal/dashboard.vue")):(0,i.kq)("",!0),(0,i._)("ul",De,[(0,i._)("li",Ce,[(0,i._)("a",{class:"nav-link",id:"pills-applications-tab","data-bs-toggle":"pill",href:"#pills-applications",role:"tab","aria-controls":"pills-applications","aria-selected":"true",onClick:t[0]||(t[0]=e=>s.tabClicked("applications"))},"Applications")])]),(0,i._)("div",Oe,[(0,i._)("div",$e,[(0,i.Wm)(l,{formCollapse:!1,label:"Applications",Index:"applications"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{ref:"applications_table",level:"internal",filterApplicationType_cache_name:"filterApplicationTypeForApplicationTabley",filterApplicationStatus_cache_name:"filterApplicationStatusForApplicationTable",filterApplicationLodgedFrom_cache_name:"filterApplicationLodgedFromForApplicationTable",filterApplicationLodgedTo_cache_name:"filterApplicationLodgedToForApplicationTable"},null,512)])),_:1})])])])}var Pe=a(9755),Fe={name:"InternalDashboard",data(){return{accessing_user:null}},components:{FormSection:y,ApplicationsTable:ye},watch:{},computed:{is_debug:function(){return!(!this.$route.query.hasOwnProperty("debug")||"true"!=this.$route.query.debug)},is_external:function(){return"external"==this.level},is_internal:function(){return"internal"==this.level}},methods:{tabClicked:function(e){"applications"==e?(this.$refs.applications_table.adjust_table_width(),this.$refs.applications_referred_to_me_table.adjust_table_width()):"competitive-processes"===e&&this.$refs.competitive_processes_table.adjust_table_width()},mapTabClicked:function(){this.$refs.component_map_with_filters.forceToRefreshMap()},set_active_tab:function(e){let t=Pe('#pills-tab a[href="#'+e+'"]'),a=bootstrap.Tab.getInstance(t);a||(a=new bootstrap.Tab(t)),a.show()}},mounted:async function(){this.$nextTick((function(){chevron_toggle.init(),this.set_active_tab("pills-applications")}))},created:function(){}};const ze=(0,v.Z)(Fe,[["render",Le],["__scopeId","data-v-5a02e148"]]);var Ie=ze,Ye={path:"/internal",component:o.MA,children:[{path:"/internal",component:Ie}]},Me=null;const qe=(0,o.p7)({history:(0,o.PO)(),routes:[{path:"/:pathMatch(.*)",component:Me},ke,Ye]});var Ee=qe;const Ze={id:"app"};function He(e,t,a,n,o,s){const r=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",Ze,[(0,i.Wm)(r)])}var We={name:"app"};const Ne=(0,v.Z)(We,[["render",He]]);var Ve=Ne,Re=a(3542),Ue=a(5733),Be=a.n(Ue),Je=a(9755),Ke=a(381);a(1920),a(5855),a(8890),a(9276)(window,Je),a(5253)(window,Je,Be()),a(9040),a(7260),a(1307),a(3587),(0,Re.extendMoment)(Ke);var Xe=a(4e3),Ge=a.n(Xe);a(807),a(4122),a(2614);const Qe=new Headers({"X-CSRFToken":ae().getCookie("csrftoken")}),et=new Headers({"X-CSRFToken":ae().getCookie("csrftoken"),"Content-Type":"application/json"});fetch=(e=>(...t)=>{t.length>1&&("string"===typeof t[1].body?t[1].headers=et:t[1].headers=Qe);const a=e.apply(void 0,t);return a})(fetch);const tt=(0,n.ri)(Ve);tt.use(Ge()),tt.use(Ee),Ee.isReady().then((()=>tt.mount("#app")))},7559:function(e){e.exports={}},4325:function(e,t,a){var n=a(6486),o=a(9755),i=a(6455);e.exports={formatError:function(e){let t="";if("object"!==typeof e.body||e.body.hasOwnProperty("length"))t="object"===typeof e.body?e.body[0]:e.body;else for(const a of Object.keys(e.body))t+=`${a}: ${e.body[a]} <br/>`;return t},apiError:function(e){var t="";if(400===e.status)try{obj=JSON.parse(e.responseText),t=obj.non_field_errors[0].replace(/[\[\]"]/g,"")}catch(a){t=e.responseText.replace(/[\[\]"]/g,"")}else t=404===e.status?"The resource you are looking for does not exist.":e.responseText.replace(/[\[\]"]/g,"");return t},apiVueResourceError:function(e){console.log("in apiVueResourceError"),console.log(e);var t="",a=null;if(400===e.status)if(a=Array.isArray(e.body)?e.body[0]:(e.body,e.body),"object"==typeof a)if(a.hasOwnProperty("non_field_errors"))t=a.non_field_errors[0].replace(/[\[\]"]/g,"");else{console.log("text"),console.log(a);for(let e in a)t+=e+": "+a[e]+"<br/>"}else t=a.replace(/[\[\]"]/g,""),t=a.replace(/^['"](.*)['"]$/,"$1");else 404===e.status&&(t="The resource you are looking for does not exist.");return console.log("error_str"),console.log(t),t},goBack:function(e){e.$router.go(window.history.back())},copyObject:function(e){return JSON.parse(JSON.stringify(e))},getCookie:function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n].trim();if(o.substring(0,e.length+1).trim()===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t},namePopover:function(e,t){t.on("mouseover",".name_popover",(function(t){e(this).popover("show"),e(this).on("mouseout",(function(){e(this).popover("hide")}))}))},add_endpoint_json:function(e,t){let a=e.split(".json"),n=a[0]+"/"+t+".json";return n=n.replace("//","/"),n},add_endpoint_join:function(e,t){let a=e+t;return a=a.replace("//","/"),a},dtPopover:function(e,t=30,a="hover"){var o="...",i=n.truncate(e,{length:t,omission:o,separator:" "}),s="<span>"+i+"</span>",r=n.template('<a href="#" role="button" data-toggle="popover" data-trigger="'+a+'" data-placement="top auto"data-html="true" data-content="<%= text %>" >more</a>');return n.endsWith(i,o)&&(s+=r({text:e})),s},dtPopoverCellFn:function(e){o(e).find('[data-toggle="popover"]').popover().on("click",(function(e){return e.preventDefault(),!0}))},processError:async function(e){console.log(e);let t="";if(e.body.non_field_errors){console.log("non_field_errors");for(let a=0;a<e.body.non_field_errors.length;a++)t+=e.body.non_field_errors[a]+"<br />"}else if(Array.isArray(e.body)){console.log("isArray");for(let a=0;a<e.body.length;a++)t+=e.body[a]+"<br />"}else{console.log("else");for(let a in e.body)if(e.body.hasOwnProperty(a)){t+=a+":<br />";for(let n=0;n<e.body[a].length;n++)t+=e.body[a][n]+"<br />"}}await i("Error",t,"error")},post_and_redirect:function(e,t){var a="<form method='POST' action='"+e+"'>";for(var n in t)t.hasOwnProperty(n)&&(a+="<input type='hidden' name='"+n+"' value='"+t[n]+"'>");a+="</form>";var i=o(a);o("body").append(i),o(i).submit()},enablePopovers:function(){let e=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));e.map((function(e){new bootstrap.Popover(e)}))}}}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,i){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],i=e[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||s>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(r=!1,i<s&&(s=i));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,i,s=n[0],r=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(l)var d=l(a)}for(t&&t(n);c<s.length;c++)i=s[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self["webpackChunkparkpasses"]=self["webpackChunkparkpasses"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(8249)}));n=a.O(n)})();
//# sourceMappingURL=app-legacy.js.map
